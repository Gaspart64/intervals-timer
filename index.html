<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Intervals">
  <meta name="theme-color" content="#111111">
  <title>Intervals â€“ Timer</title>
  <link rel="manifest" href="manifest.json">
  <link rel="apple-touch-icon" href="icons/icon-192.png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Barlow+Condensed:wght@300;400;600;700;900&family=Barlow:wght@400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>

<!-- NAV -->
<nav class="nav" id="nav">
  <button class="nav-btn active" data-view="timer" aria-label="Interval Timer">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><circle cx="12" cy="12" r="9"/><polyline points="12 6 12 12 16 14"/></svg>
    <span>Timer</span>
  </button>
  <button class="nav-btn" data-view="stopwatch" aria-label="Stopwatch">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><circle cx="12" cy="13" r="8"/><polyline points="12 9 12 13"/><line x1="9.5" y1="2" x2="14.5" y2="2"/></svg>
    <span>Stopwatch</span>
  </button>
  <button class="nav-btn" data-view="countdown" aria-label="Countdown">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83"/></svg>
    <span>Countdown</span>
  </button>
  <button class="nav-btn" data-view="templates" aria-label="Templates">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/></svg>
    <span>Templates</span>
  </button>
</nav>

<!-- VIEWS -->
<main class="main">

  <!-- ===== INTERVAL TIMER VIEW ===== -->
  <section class="view active" id="view-timer">
    <div class="timer-stage" id="timerStage">
      <div class="stage-bg" id="stageBg"></div>

      <div class="timer-header">
        <div class="stat"><span class="stat-label">ELAPSED</span><span class="stat-value" id="elapsed">0:00</span></div>
        <div class="stat center"><span class="stat-label">INTERVAL</span><span class="stat-value" id="intervalCount">â€“</span></div>
        <div class="stat right"><span class="stat-label">REMAINING</span><span class="stat-value" id="remaining">â€“</span></div>
      </div>

      <div class="timer-display">
        <div class="big-time" id="bigTime">00:00</div>
        <div class="warning-flash" id="warningFlash"></div>
      </div>

      <div class="current-interval">
        <div class="ci-label">CURRENT INTERVAL</div>
        <div class="ci-name" id="ciName">â€“</div>
        <div class="ci-duration" id="ciDuration">â€“</div>
      </div>

      <div class="next-interval" id="nextInterval">
        <div class="ni-label">UP NEXT</div>
        <div class="ni-name" id="niName">â€“</div>
        <div class="ni-duration" id="niDuration">â€“</div>
      </div>
    </div>

    <!-- Controls -->
    <div class="timer-controls">
      <button class="ctrl-btn secondary" id="btnReset" aria-label="Reset">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polyline points="1 4 1 10 7 10"/><path d="M3.51 15a9 9 0 1 0 .49-6.51"/></svg>
      </button>
      <button class="ctrl-btn primary" id="btnPlayPause" aria-label="Start">
        <svg class="icon-play" viewBox="0 0 24 24" fill="currentColor"><polygon points="5 3 19 12 5 21 5 3"/></svg>
        <svg class="icon-pause hidden" viewBox="0 0 24 24" fill="currentColor"><rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/></svg>
      </button>
      <button class="ctrl-btn secondary" id="btnSkip" aria-label="Skip">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polygon points="5 4 15 12 5 20 5 4"/><line x1="19" y1="5" x2="19" y2="19"/></svg>
      </button>
    </div>

    <!-- Setup Panel -->
    <div class="setup-panel" id="setupPanel">
      <h2 class="setup-title">Configure Workout</h2>
      <div id="intervalList" class="interval-list"></div>
      <button class="add-interval-btn" id="addIntervalBtn">+ Add Interval</button>

      <div class="setup-row">
        <label>Rounds</label>
        <div class="number-input">
          <button class="ni-dec" data-target="rounds">âˆ’</button>
          <input type="number" id="roundsInput" value="1" min="1" max="99">
          <button class="ni-inc" data-target="rounds">+</button>
        </div>
      </div>

      <div class="setup-row">
        <label>Sound</label>
        <select id="soundSelect">
          <option value="beep">Beep</option>
          <option value="bell">Bell</option>
          <option value="silent">Silent</option>
        </select>
      </div>

      <div class="setup-row">
        <label>TTS Announce</label>
        <label class="toggle"><input type="checkbox" id="ttsToggle"><span class="slider"></span></label>
      </div>

      <div class="setup-actions">
        <button class="save-template-btn" id="saveTemplateBtn">ðŸ’¾ Save as Template</button>
        <button class="start-btn" id="startBtn">START WORKOUT â†’</button>
      </div>
    </div>
  </section>

  <!-- ===== STOPWATCH VIEW ===== -->
  <section class="view" id="view-stopwatch">
    <div class="sw-display">
      <div class="sw-time" id="swTime">00:00.00</div>
    </div>
    <div class="sw-controls">
      <button class="ctrl-btn secondary" id="swLap" disabled aria-label="Lap">LAP</button>
      <button class="ctrl-btn primary" id="swStart" aria-label="Start">
        <svg class="icon-play" viewBox="0 0 24 24" fill="currentColor"><polygon points="5 3 19 12 5 21 5 3"/></svg>
        <svg class="icon-pause hidden" viewBox="0 0 24 24" fill="currentColor"><rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/></svg>
      </button>
      <button class="ctrl-btn secondary" id="swReset" aria-label="Reset">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polyline points="1 4 1 10 7 10"/><path d="M3.51 15a9 9 0 1 0 .49-6.51"/></svg>
      </button>
    </div>
    <div class="lap-list" id="lapList"></div>
  </section>

  <!-- ===== COUNTDOWN VIEW ===== -->
  <section class="view" id="view-countdown">
    <div class="cd-presets">
      <button class="preset-btn" data-seconds="60">1:00</button>
      <button class="preset-btn" data-seconds="120">2:00</button>
      <button class="preset-btn" data-seconds="300">5:00</button>
      <button class="preset-btn" data-seconds="600">10:00</button>
      <button class="preset-btn" data-seconds="1800">30:00</button>
    </div>
    <div class="cd-display">
      <div class="cd-time" id="cdTime">05:00</div>
    </div>
    <div class="cd-set">
      <label>Set Time</label>
      <div class="cd-time-inputs">
        <input type="number" id="cdMinutes" value="5" min="0" max="99" placeholder="MM">
        <span>:</span>
        <input type="number" id="cdSeconds" value="0" min="0" max="59" placeholder="SS">
      </div>
    </div>
    <div class="sw-controls">
      <button class="ctrl-btn secondary" id="cdReset">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polyline points="1 4 1 10 7 10"/><path d="M3.51 15a9 9 0 1 0 .49-6.51"/></svg>
      </button>
      <button class="ctrl-btn primary" id="cdStart">
        <svg class="icon-play" viewBox="0 0 24 24" fill="currentColor"><polygon points="5 3 19 12 5 21 5 3"/></svg>
        <svg class="icon-pause hidden" viewBox="0 0 24 24" fill="currentColor"><rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/></svg>
      </button>
      <div style="width:64px"></div>
    </div>
  </section>

  <!-- ===== TEMPLATES VIEW ===== -->
  <section class="view" id="view-templates">
    <h2 class="tmpl-title">Workout Templates</h2>
    <div class="template-grid" id="templateGrid"></div>
  </section>

</main>

<!-- MODALS -->
<div class="modal-overlay hidden" id="modalOverlay">
  <div class="modal" id="modal">
    <h3 id="modalTitle">Edit Interval</h3>
    <div id="modalBody"></div>
    <div class="modal-actions">
      <button class="modal-cancel" id="modalCancel">Cancel</button>
      <button class="modal-ok" id="modalOk">Save</button>
    </div>
  </div>
</div>

<div class="toast" id="toast"></div>

<script src="app.js"></script>
</body>
</html>
